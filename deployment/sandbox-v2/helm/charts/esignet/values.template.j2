component: esignet
part-of: mosip
activeProfileEnv: default 
springConfigLabel:  {{ config_repo.version }}
configServerUrl: {{ config_server.internal_url }}
iamAdapterUrl: {{ iam_adapter_url }}
exportLogs: enabled  # Let filebeat export the logs

ingress:
   namespace: default

artifactoryUrl: http://artifactory-service.lts:80/
iamAdapterUrl: http://artifactory-service.lts:80/artifactory/libs-release-local/io/mosip/kernel/kernel-auth-adapter.jar
esignetwrapperurl: http://artifactory-service.lts:80/artifactory/libs-release-local/esignet/esignet-wrapper.zip

probe:
  period: 10 # Seconds
  timeout: 5
  livenessPeriod: 30
  failureThreshold: 15
  startupPeriod: 10
  initialDelaySeconds: 60

isGlowroot: {{ is_glowroot }} 
imagePullPolicy: Always
dockerHub:
  private: {{ docker.hub.private }}  
  keyname: {{ docker.hub.keyname }}

services:
  esignet:
    serviceName: {{ versions.services.esignet.service.keys()[0] }}
    dockerImage: {{ versions.services.esignet.service.values()[0] }}
    ports:
      containerPort: 8088
      servicePort: 80
    hsmUrl: tcp://softhsm-esignet:80
    ingressPath: /v1/esignet
    healthUrl: /v1/esignet/actuator/health
    podconfig:
      {{ podconfig.esignet.service | to_nice_yaml(indent=6) | indent(6) }}
    annotation: /v1/esignet/actuator/prometheus

  ui:
    serviceName: {{ versions.services.esignet.oidcui.keys()[0] }}
    dockerImage: {{ versions.services.esignet.oidcui.values()[0] }}
    ports:
      containerPort: 3000
      servicePort: 80
    oidc_service_host: esignet.default
    oidcUiPublicUri: oidc-ui
    apiBaseUrl: http://esignet.default/v1/esignet
    sbiDomainUri: http://esignet.default
    configName: oidc-ui # ConfigMap name
    ingressPath: /oidc-ui
    healthUrl: /oidc-ui
    podconfig:
      {{ podconfig.esignet.ui | to_nice_yaml(indent=6) | indent(6) }}
